<%- include("../partials/user/header") %>

<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <div class="hero-content text-white">
      <h1 class="display-4 fw-bold mb-4">Discover Stories That Find You</h1>
      <p class="fs-5 mb-4">WHERE STORIES FIND LOST SOULS</p>
      <div class="d-flex flex-column flex-sm-row gap-3">
        <a href="/shop" class="btn btn-light px-4 py-2 fw-medium">Shop Now</a>
        <a href="/shop" class="btn btn-outline-light px-4 py-2 fw-medium">Explore Collections</a>
      </div>
    </div>
  </div>
</section>

<!-- Featured Categories -->
<section class="py-5 bg-white">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fs-1 fw-bold">Browse Categories</h2>
      <a href="/shop" class="text-dark text-decoration-none hover-dark">View All</a>
    </div>
    <div class="row g-4">
      <% if (categories && categories.length > 0) { %>
        <% categories.slice(0, 3).forEach(category => { %>
          <div class="col-md-4">
            <div class="category-card shadow-sm">
              <img src="<%= category.image %>" alt="<%= category.name %>" />
              <div class="category-overlay">
                <h3 class="text-white fs-4 fw-bold mb-2"><%= category.name %></h3>
                <a href="/shop?category=<%= category._id %>" class="text-white text-decoration-underline">Explore</a>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <div class="col-12 text-center">
          <p>No categories available.</p>
        </div>
      <% } %>
    </div>
  </div>
</section>

<!-- Bestsellers (Based on Stock Count) -->
<section class="py-5 bg-light">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fs-1 fw-bold">Bestsellers</h2>
      <a href="/shop" class="text-dark text-decoration-none hover-dark">View All</a>
    </div>
    <div class="row g-4">
      <% if (topSellingProducts && topSellingProducts.length > 0) { %>
        <% topSellingProducts.slice(0, 4).forEach(product => { %>
          <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="product-card bg-white h-100">
              <div class="product-image-container">
                <% if (product.isNew) { %>
                  <span class="product-tag">New</span>
                <% } %>
                <a href="/products/<%= product._id %>" class="text-decoration-none">
                  <img src="<%= product.mainImage || '/api/placeholder/600/800' %>" alt="<%= product.title %>" class="product-image" />
                </a>
              </div>
              <div class="p-3">
                <h3 class="fs-5 fw-semibold mb-1">
                  <a href="/products/<%= product._id %>" class="text-dark text-decoration-none"><%= product.title %></a>
                </h3>
                <p class="text-muted small mb-2"><%= product.author %></p>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold">₹<%= product.salePrice %></span>
                  <button class="add-to-cart border-0">
                    <i class="ri-add-line"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <div class="col-12 text-center">
          <p>No bestselling products available.</p>
        </div>
      <% } %>
    </div>
  </div>
</section>

<!-- New Arrivals (Based on Date Added) -->
<section class="py-5 bg-white">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fs-1 fw-bold">New Arrivals</h2>
      <a href="/shop" class="text-dark text-decoration-none hover-dark">View All</a>
    </div>
    <div class="row g-4">
      <% if (newArrivals && newArrivals.length > 0) { %>
        <% newArrivals.slice(0, 4).forEach(product => { %>
          <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="product-card bg-white h-100">
              <div class="product-image-container">
                <% if (product.isNew) { %>
                  <span class="product-tag">New</span>
                <% } %>
                <a href="/products/<%= product._id %>" class="text-decoration-none">
                  <img src="<%= product.mainImage || '/api/placeholder/600/800' %>" alt="<%= product.title %>" class="product-image" />
                </a>
              </div>
              <div class="p-3">
                <h3 class="fs-5 fw-semibold mb-1">
                  <a href="/products/<%= product._id %>" class="text-dark text-decoration-none"><%= product.title %></a>
                </h3>
                <p class="text-muted small mb-2"><%= product.author %></p>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold">₹<%= product.salePrice %></span>
                  <button class="add-to-cart border-0">
                    <i class="ri-add-line"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <div class="col-12 text-center">
          <p>No new arrivals available.</p>
        </div>
      <% } %>
    </div>
  </div>
</section>

<!-- Testimonials (unchanged) -->
<section class="py-5 bg-light">
  <div class="container">
    <h2 class="fs-1 fw-bold text-center mb-5">Reader Stories</h2>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="testimonial-card bg-white h-100">
          <div class="mb-3">
            <i class="ri-double-quotes-l fs-2 text-dark"></i>
          </div>
          <p class="text-muted mb-4">
            "Chapterless has completely transformed my reading experience. Their curated selections always seem to find me at just the right moment in my life."
          </p>
          <div class="d-flex align-items-center">
            <div class="user-avatar">
              <i class="ri-user-line"></i>
            </div>
            <div class="ms-3">
              <h4 class="fs-6 fw-semibold mb-0">Emily Richardson</h4>
              <p class="small text-muted mb-0">Literature Professor</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="testimonial-card bg-white h-100">
          <div class="mb-3">
            <i class="ri-double-quotes-l fs-2 text-dark"></i>
          </div>
          <p class="text-muted mb-4">
            "I've discovered authors I never would have found elsewhere. Each book feels personally selected for my soul. The quality and curation are unmatched."
          </p>
          <div class="d-flex align-items-center">
            <div class="user-avatar">
              <i class="ri-user-line"></i>
            </div>
            <div class="ms-3">
              <h4 class="fs-6 fw-semibold mb-0">Michael Thornton</h4>
              <p class="small text-muted mb-0">Avid Reader</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="testimonial-card bg-white h-100">
          <div class="mb-3">
            <i class="ri-double-quotes-l fs-2 text-dark"></i>
          </div>
          <p class="text-muted mb-4">
            "The minimalist aesthetic and thoughtful selection process make Chapterless stand out. It's not just a bookstore; it's a sanctuary for lost souls seeking stories."
          </p>
          <div class="d-flex align-items-center">
            <div class="user-avatar">
              <i class="ri-user-line"></i>
            </div>
            <div class="ms-3">
              <h4 class="fs-6 fw-semibold mb-0">Sophia Nguyen</h4>
              <p class="small text-muted mb-0">Book Blogger</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Newsletter (unchanged) -->
<section class="newsletter-section">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-6 text-center">
        <h2 class="fs-1 fw-bold mb-3">Join Our Literary Journey</h2>
        <p class="text-white-50 mb-4">
          Subscribe to receive curated reading recommendations, author interviews, and exclusive offers.
        </p>
        <form class="d-flex flex-column flex-sm-row gap-3 mb-3 mx-auto" style="max-width: 500px">
          <input type="email" class="form-control" placeholder="Your email address" style="border-radius: 0.5rem" />
          <button type="submit" class="btn btn-light fw-medium" style="border-radius: 0.5rem; white-space: nowrap">
            Subscribe
          </button>
        </form>
        <p class="small text-white-50">
          By subscribing, you agree to our Privacy Policy and consent to receive updates from Chapterless.
        </p>
      </div>
    </div>
  </div>
</section>

<%- include("../partials/user/footer") %>

<style>
  body {
    font-family: "Inter", sans-serif;
    color: #1a1a1a;
  }
  .hero-section {
    background-image: url("/assets/herosection.jpg");
    background-size: cover;
    background-position: center;
    position: relative;
    padding: 8rem 0;
  }
  .hero-section::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.2);
  }
  .hero-content {
    position: relative;
    z-index: 10;
    max-width: 42rem;
  }
  .category-card {
    position: relative;
    overflow: hidden;
    border-radius: 0.5rem;
    height: 16rem;
    transition: all 0.3s ease;
  }
  .category-card:hover img {
    transform: scale(1.05);
  }
  .category-card img {
    transition: transform 0.5s ease;
    object-fit: cover;
    object-position: top;
    height: 100%;
    width: 100%;
  }
  .category-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
    padding: 1.5rem;
  }
  .product-image-container {
    height: 16rem;
    overflow: hidden;
    position: relative;
  }
  .product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top;
  }
  .product-card:hover .product-image {
    transform: scale(1.05);
  }
  .product-tag {
    position: absolute;
    top: 0.75rem;
    left: 0.75rem;
    z-index: 10;
    background-color: #000;
    color: #fff;
    font-size: 0.75rem;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
  }
  .add-to-cart {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    background-color: #000;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    border: none;
  }
  .add-to-cart:hover {
    background-color: #333;
  }
  .product-image-container a {
    display: block;
  }
  .product-card a {
    color: inherit;
  }
  @media (max-width: 768px) {
    .hero-section {
      padding: 6rem 0;
    }
  }
</style>